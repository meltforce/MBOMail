# mboMail — Xcode Project Setup (Manual Steps)

These steps must be performed by the user in the Xcode GUI before Claude Code can start writing source files.

## Prerequisites

- Xcode 16+ installed from the Mac App Store
- (Optional) Apple Developer Program membership — only needed for code signing and distribution

---

## Step 1: Create the Xcode Project

1. Open Xcode
2. **File → New → Project** (or `⌘+Shift+N`)
3. Select **macOS → App** → Next
4. Fill in the project settings:

| Field | Value |
|---|---|
| Product Name | `mboMail` |
| Team | Your developer account, or "None" if you don't have one yet |
| Organization Identifier | `org.mbomail` (or your own reverse-domain, e.g. `com.yourdomain`) |
| Bundle Identifier | Will auto-fill as `org.mbomail.mboMail` |
| Interface | **SwiftUI** |
| Language | **Swift** |
| Storage | **None** |
| Include Tests | Unchecked (can add later) |

5. Click **Next**
6. Save location: choose `/Users/linus/projects/MBOMail`
   - **Important:** Uncheck "Create Git repository" — we'll initialize git separately
   - This will create a `mboMail.xcodeproj` and a `mboMail/` source folder inside the project directory

After this step, the directory should look like:

```
/Users/linus/projects/MBOMail/
├── docs/
├── mboMail.xcodeproj/
└── mboMail/
    ├── mboMailApp.swift        ← Generated by Xcode
    ├── ContentView.swift       ← Generated by Xcode (we'll replace this)
    ├── Assets.xcassets/
    └── Preview Content/
```

---

## Step 2: Set Deployment Target

1. Click on **mboMail** in the project navigator (blue icon at the top)
2. Select the **mboMail** target
3. Go to the **General** tab
4. Under **Minimum Deployments**, set **macOS** to **15.0**

---

## Step 3: Enable App Sandbox

1. Select the **mboMail** target
2. Go to the **Signing & Capabilities** tab
3. Click **+ Capability** (top left)
4. Search for and add **App Sandbox**
5. In the sandbox settings that appear, enable:
   - **Network → Outgoing Connections (Client)** ✅
   - **File Access → User Selected File → Read/Write** ✅

This creates/updates the `mboMail.entitlements` file automatically.

---

## Step 4: Verify Entitlements

After Step 3, a file `mboMail/mboMail.entitlements` should exist with these entries:

```xml
<key>com.apple.security.app-sandbox</key>
<true/>
<key>com.apple.security.network.client</key>
<true/>
<key>com.apple.security.files.user-selected.read-write</key>
<true/>
```

If the file doesn't match, Claude Code can fix it.

---

## Step 5: Add mailto URL Scheme

1. Select the **mboMail** target
2. Go to the **Info** tab
3. Expand **URL Types**
4. Click **+** to add a new URL type:

| Field | Value |
|---|---|
| Identifier | `org.mbomail.mailto` |
| URL Schemes | `mailto` |
| Role | Viewer |

This registers the app as a mailto: handler.

---

## Step 6: Build and Verify

1. Press `⌘+B` to build
2. The project should compile successfully with the default template code
3. Press `⌘+R` to run — a blank window should appear

If this works, the Xcode setup is complete. Claude Code can now start replacing the template code with the mboMail implementation.

---

## Ongoing: Adding New Files

When Claude Code creates new `.swift` files, they need to be added to the Xcode project:

1. In Xcode's project navigator (left sidebar), right-click the **mboMail** folder
2. Select **Add Files to "mboMail"...**
3. Navigate to and select the new file(s)
4. Ensure **"Add to targets: mboMail"** is checked
5. Click **Add**

Alternatively, drag the file from Finder into the project navigator.

**Tip:** If Claude Code tells you "I created `Views/SettingsView.swift`", you'd add that file. Xcode will immediately pick up the code.

---

## Ongoing: Adding Swift Packages (Dependencies)

When the project needs a dependency (e.g., KeyboardShortcuts, Sparkle):

1. **File → Add Package Dependencies** (or `⌘+Shift+,` → Package Dependencies tab)
2. Enter the package URL (Claude Code will provide it)
3. Set version rules (usually "Up to Next Major Version")
4. Click **Add Package**
5. Select the library product to add to the mboMail target

---

## Summary of User Actions

| When | What | Time |
|---|---|---|
| Once (initial setup) | Steps 1–6 above | ~5 minutes |
| Per new file | Add file to project navigator | ~5 seconds |
| Per new dependency | Add Swift Package | ~30 seconds |
| Per build | `⌘+B` in Xcode (or Claude Code runs `xcodebuild`) | Automatic |
